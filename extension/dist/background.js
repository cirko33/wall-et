/*! For license information please see background.js.LICENSE.txt */
(()=>{function e(){var n,r,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function s(e,o,c,a){var s=o&&o.prototype instanceof u?o:u,l=Object.create(s.prototype);return t(l,"_invoke",function(e,t,o){var c,a,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:n,a:d,f:d.bind(n,4),d:function(e,t){return c=e,a=0,s=n,p.n=t,i}};function d(e,t){for(a=e,s=t,r=0;!f&&u&&!o&&r<l.length;r++){var o,c=l[r],d=p.p,h=c[2];e>3?(o=h===t)&&(s=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=n):c[0]<=d&&((o=e<2&&d<c[1])?(a=0,p.v=t,p.n=c[1]):d<h&&(o=e<3||c[0]>t||t>h)&&(c[4]=e,c[5]=t,p.n=h,a=0))}if(o||e>1)return i;throw f=!0,t}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),a=l,s=h;(r=a<2?n:s)||!f;){c||(a?a<3?(a>1&&(p.n=-1),d(a,s)):p.n=s:p.v=s);try{if(u=2,c){if(a||(o="next"),r=c[o]){if(!(r=r.call(c,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,a<2&&(a=0)}else 1===a&&(r=c.return)&&r.call(c),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=n}else if((r=(f=p.n<0)?s:e.call(t,p))!==i)break}catch(e){c=n,a=1,s=e}finally{u=1}}return{value:r,done:f}}}(e,c,a),!0),l}var i={};function u(){}function l(){}function f(){}r=Object.getPrototypeOf;var p=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),d=f.prototype=u.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=f,t(d,"constructor",f),t(f,"constructor",l),l.displayName="GeneratorFunction",t(f,a,"GeneratorFunction"),t(d),t(d,a,"Generator"),t(d,c,function(){return this}),t(d,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:h}})()}function t(e,n,r,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}t=function(e,n,r,o){if(n)c?c(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r;else{var a=function(n,r){t(e,n,function(e){return this._invoke(n,r,e)})};a("next",0),a("throw",1),a("return",2)}},t(e,n,r,o)}function n(e,t,n,r,o,c,a){try{var s=e[c](a),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(o,c){var a=e.apply(t,r);function s(e){n(a,o,c,s,i,"next",e)}function i(e){n(a,o,c,s,i,"throw",e)}s(void 0)})}}function o(){return(o=r(e().m(function t(n){var r,o;return e().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["wallet"]);case 1:(r=e.v).wallet?n({success:!0,wallet:r.wallet}):n({success:!1,error:"No wallet found"}),e.n=3;break;case 2:e.p=2,o=e.v,n({success:!1,error:o.message});case 3:return e.a(2)}},t,null,[[0,2]])}))).apply(this,arguments)}function c(){return(c=r(e().m(function t(n,r){return e().w(function(e){for(;;)switch(e.n){case 0:try{r({success:!0,message:"Transaction request received"})}catch(e){r({success:!1,error:e.message})}case 1:return e.a(2)}},t)}))).apply(this,arguments)}function a(){return(a=r(e().m(function t(n,r){return e().w(function(e){for(;;)switch(e.n){case 0:try{r({success:!0,balance:"0.0"})}catch(e){r({success:!1,error:e.message})}case 1:return e.a(2)}},t)}))).apply(this,arguments)}function s(){return(s=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.remove(["wallet"]);case 1:n({success:!0,message:"Wallet cleared successfully"}),e.n=3;break;case 2:e.p=2,r=e.v,n({success:!1,error:r.message});case 3:return e.a(2)}},t,null,[[0,2]])}))).apply(this,arguments)}chrome.runtime.onInstalled.addListener(function(e){"install"===e.reason&&(console.log("Sepolia ETH Wallet extension installed"),chrome.storage.local.set({settings:{network:"sepolia",gasPrice:20,autoRefresh:!0}}))}),chrome.runtime.onMessage.addListener(function(e,t,n){switch(e.action){case"getWalletInfo":return function(e){o.apply(this,arguments)}(n),!0;case"sendTransaction":return function(e,t){c.apply(this,arguments)}(e.data,n),!0;case"getBalance":return function(e,t){a.apply(this,arguments)}(e.address,n),!0;case"clearWallet":return function(e){s.apply(this,arguments)}(n),!0;default:n({success:!1,error:"Unknown action"})}}),chrome.action.onClicked.addListener(function(e){chrome.action.setPopup({popup:"popup.html"})}),chrome.tabs.onUpdated.addListener(function(e,t,n){"complete"===t.status&&n.url&&console.log("Tab updated:",n.url)}),chrome.runtime.onStartup.addListener(function(){console.log("Sepolia ETH Wallet extension started")}),chrome.runtime.onSuspend.addListener(function(){console.log("Sepolia ETH Wallet extension suspended")})})();